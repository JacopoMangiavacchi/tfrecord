# TensorFlow record (.tfrecord) File I/O for Node

[![Build Status](https://travis-ci.org/pwnall/tfrecord.svg)](https://travis-ci.org/pwnall/tfrecord)
[![NPM Version](http://img.shields.io/npm/v/tfrecord.svg)](https://www.npmjs.org/package/tfrecord)

Produce data for your TensorFlow pipelines directly in node.


## Requirements

This module uses
[ES2017's async / await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function),
so it requires node.js 7.6 or above.

While this module will presumably be used to interoperate with
[TensorFlow](https://www.tensorflow.org/), it does not require a working
TensorFlow installation.


## Usage

```javascript
const tfrecord = require('tfrecord');

async function writeDemo() {
  const writer = await tfrecord.createWriter('data.tfrecord');

  const example = tfrecord.Example.fromObject({
    features: {
      feature: {
        answer: {  // The feature name.
          int64List: {
            value: [42],  // The feature value.
          },
        },
      },
    },
  });

  await writer.writeExample(example);
  await writer.close();
}

async function readDemo() {
  const reader = await tfrecord.createReader('data.tfrecord');
  let example;
  while (example = await reader.readExample()) {
    console.log('%j', example.toJSON());
  }
  // The reader auto-closes after it reaches the end of the file.
}

async function demo() {
  await writeDemo();
  await readDemo();
}

demo();
```


## Development

Run the following command to populate the pre-generated files. These files are
distributed in the npm package, but not checked into the git repository.

```bash
scripts/generate.sh
```

The test data can be regenerated by the following command, which requires a
working TensorFlow installation on Python 3.

```bash
python3 scripts/write_test_data.py
```

The test data is in the repository so we don't have to spend the time to install TensorFlow on Travis for every run.